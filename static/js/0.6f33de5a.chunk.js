(this["webpackJsonpjk-me"]=this["webpackJsonpjk-me"]||[]).push([[0],{175:function(t,e,n){"use strict";n.r(e),n.d(e,"CRegBase",(function(){return S})),n.d(e,"CRegister",(function(){return V})),n.d(e,"CForget",(function(){return N}));var r=n(0),a=n.n(r),c=n(2),i=n(3),u=n(4),s=n(5),o=n(6),b=n(27),l=n(12),h=(n(8),n(111)),p=n(1),f=function(t){Object(s.a)(n,t);var e=Object(o.a)(n);function n(){var t;Object(i.a)(this,n);for(var r=arguments.length,u=new Array(r),s=0;s<r;s++)u[s]=arguments[s];return(t=e.call.apply(e,[this].concat(u))).schema=[{name:"user",type:"string",required:!0,maxLength:100},{name:"verify",type:"submit"}],t.uiSchema=void 0,t.onSubmit=function(){var e=Object(c.a)(a.a.mark((function e(n,r){var c,i,u,s,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.clearContextErrors(),c="user",i=r.getValue(c),void 0!==(u=Object(h.a)(i))){e.next=7;break}return r.setError(c,"\u5fc5\u987b\u662f\u624b\u673a\u53f7\u6216\u90ae\u7bb1"),e.abrupt("return");case 7:if("mobile"!==(s=u.type)){e.next=12;break}if(11===i.length&&"1"===i[0]){e.next=12;break}return r.setError(c,"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7"),e.abrupt("return");case 12:return t.controller.account=i,t.controller.type=s,e.next=16,t.controller.checkAccount();case 16:void 0!==(o=e.sent)&&r.setError(c,o);case 18:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),t.onEnter=function(){var e=Object(c.a)(a.a.mark((function e(n,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("user"!==n){e.next=4;break}return e.next=3,t.onSubmit("verify",r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),t}return Object(u.a)(n,[{key:"init",value:function(){this.uiSchema={items:{user:{widget:"text",label:this.accountLable,placeholder:"\u624b\u673a\u53f7\u6216\u90ae\u7bb1"},verify:{widget:"button",className:"btn btn-primary btn-block mt-3",label:"\u53d1\u9001\u9a8c\u8bc1\u7801"}}}}},{key:"header",value:function(){return this.pageCaption}},{key:"content",value:function(){return Object(p.jsxs)("div",{className:"w-max-20c my-5 py-5",style:{marginLeft:"auto",marginRight:"auto"},children:[Object(h.b)(),Object(p.jsx)("div",{className:"h-3c"}),Object(p.jsx)(l.Form,{schema:this.schema,uiSchema:this.uiSchema,onButtonClick:this.onSubmit,onEnter:this.onEnter,requiredFlag:!1}),Object(p.jsx)("div",{className:"text-center py-3",children:Object(p.jsx)(l.Ax,{href:"/login",className:"text-primary",children:"\u5df2\u6709\u8d26\u53f7\uff0c\u76f4\u63a5\u767b\u5f55"})}),l.nav.privacyEntry()]})}}]),n}(b.b),m=function(t){Object(s.a)(n,t);var e=Object(o.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"accountLable",get:function(){return"\u8d26\u53f7"}},{key:"pageCaption",get:function(){return"\u6ce8\u518c\u8d26\u53f7"}}]),n}(f),v=function(t){Object(s.a)(n,t);var e=Object(o.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"footer",value:function(){return null}},{key:"accountLable",get:function(){return"\u8d26\u53f7"}},{key:"pageCaption",get:function(){return"\u5bc6\u7801\u627e\u56de"}}]),n}(f),y=n(20),d=function(t){Object(s.a)(n,t);var e=Object(o.a)(n);function n(){var t;Object(i.a)(this,n);for(var r=arguments.length,u=new Array(r),s=0;s<r;s++)u[s]=arguments[s];return(t=e.call.apply(e,[this].concat(u))).schema=[{name:"verify",type:"number",required:!0,maxLength:6},{name:"submit",type:"submit"}],t.onVerifyChanged=function(t,e,n){t.setDisabled("submit",!e||6!==e.length)},t.uiSchema={items:{verify:{widget:"text",label:"\u9a8c\u8bc1\u7801",placeholder:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",onChanged:t.onVerifyChanged},submit:{widget:"button",className:"btn btn-primary btn-block mt-3",label:"\u4e0b\u4e00\u6b65 >",disabled:!0}}},t.onVerify=void 0,t.onSubmit=function(){var e=Object(c.a)(a.a.mark((function e(n,r){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=r.getValue("verify"),e.next=3,t.onVerify(c);case 3:if(0!==e.sent){e.next=7;break}return r.setError("verify","\u9a8c\u8bc1\u7801\u9519\u8bef"),e.abrupt("return");case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),t.onEnter=function(){var e=Object(c.a)(a.a.mark((function e(n,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("verify"!==n){e.next=4;break}return e.next=3,t.onSubmit("submit",r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),t}return Object(u.a)(n,[{key:"init",value:function(t){this.onVerify=t}},{key:"header",value:function(){return"\u9a8c\u8bc1\u7801"}},{key:"content",value:function(){var t,e;switch(this.controller.type){case"mobile":t="\u624b\u673a\u53f7";break;case"email":t="\u90ae\u7bb1",e=Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"text-danger",children:"\u6ce8\u610f"}),": \u6709\u53ef\u80fd\u8bef\u4e3a\u5783\u573e\u90ae\u4ef6\uff0c\u8bf7\u68c0\u67e5",Object(p.jsx)("br",{})]})}return Object(p.jsxs)("div",{className:"w-max-20c my-5 py-5",style:{marginLeft:"auto",marginRight:"auto"},children:["\u9a8c\u8bc1\u7801\u5df2\u7ecf\u53d1\u9001\u5230",t,Object(p.jsx)("br",{}),Object(p.jsx)("div",{className:"py-2 px-3 my-2 text-primary bg-light",children:Object(p.jsx)("b",{children:this.controller.account})}),e,Object(p.jsx)("div",{className:"h-1c"}),Object(p.jsx)(l.Form,{schema:this.schema,uiSchema:this.uiSchema,onButtonClick:this.onSubmit,onEnter:this.onEnter,requiredFlag:!1})]})}}]),n}(b.b),j=function(t){Object(s.a)(n,t);var e=Object(o.a)(n);function n(){var t;Object(i.a)(this,n);for(var r=arguments.length,u=new Array(r),s=0;s<r;s++)u[s]=arguments[s];return(t=e.call.apply(e,[this].concat(u))).schema=[{name:"pwd",type:"string",required:!0,maxLength:100},{name:"rePwd",type:"string",required:!0,maxLength:100},{name:"submit",type:"submit"}],t.onButtonSubmit=function(){var e=Object(c.a)(a.a.mark((function e(n,r){var c,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=r.form.data,i=c.pwd,u=c.rePwd,i&&i===u){e.next=9;break}r.setValue("pwd",""),r.setValue("rePwd",""),s="\u5bc6\u7801\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\u5bc6\u7801\uff01",r.setError("pwd",s),e.next=13;break;case 9:return e.next=11,t.controller.onPasswordSubmit(i);case 11:void 0!==(s=e.sent)&&l.nav.push(Object(p.jsx)(l.Page,{header:"\u6ce8\u518c\u4e0d\u6210\u529f",children:Object(p.jsx)("div",{className:"p-5 text-danger",children:s})}));case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),t.onEnter=function(){var e=Object(c.a)(a.a.mark((function e(n,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("rePwd"!==n){e.next=4;break}return e.next=3,t.onButtonSubmit("submit",r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),t}return Object(u.a)(n,[{key:"account",get:function(){return this.controller.account}},{key:"header",value:function(){return this.pageCaption}},{key:"content",value:function(){var t={items:{pwd:{widget:"password",placeholder:"\u5bc6\u7801",label:"\u5bc6\u7801"},rePwd:{widget:"password",placeholder:"\u91cd\u590d\u5bc6\u7801",label:"\u91cd\u590d\u5bc6\u7801"},submit:{widget:"button",className:"btn btn-primary btn-block mt-3",label:this.submitCaption}}};return Object(p.jsxs)("div",{className:"w-max-20c my-5 py-5",style:{marginLeft:"auto",marginRight:"auto"},children:["\u6ce8\u518c\u8d26\u53f7",Object(p.jsx)("br",{}),Object(p.jsx)("div",{className:"py-2 px-3 my-2 text-primary bg-light",children:Object(p.jsx)("b",{children:this.account})}),Object(p.jsx)("div",{className:"h-1c"}),Object(p.jsx)(l.Form,{schema:this.schema,uiSchema:t,onButtonClick:this.onButtonSubmit,onEnter:this.onEnter,requiredFlag:!1})]})}}]),n}(b.b),x=function(t){Object(s.a)(n,t);var e=Object(o.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"pageCaption",get:function(){return"\u6ce8\u518c\u8d26\u53f7"}},{key:"submitCaption",get:function(){return"\u6ce8\u518c\u65b0\u8d26\u53f7"}}]),n}(j),O=function(t){Object(s.a)(n,t);var e=Object(o.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"pageCaption",get:function(){return"\u8d26\u53f7\u5bc6\u7801"}},{key:"submitCaption",get:function(){return"\u6539\u5bc6\u7801"}}]),n}(j),g=function(t){Object(s.a)(n,t);var e=Object(o.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"header",value:function(){return!1}}]),n}(b.b),k=function(t){Object(s.a)(n,t);var e=Object(o.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"content",value:function(){var t=this.controller,e=t.account,n=t.login;return Object(p.jsx)("div",{className:"container w-max-30c",children:Object(p.jsxs)("div",{className:"my-5",children:[Object(p.jsxs)("div",{className:"py-5 text-center",children:["\u8d26\u53f7 ",Object(p.jsxs)("strong",{className:"text-primary",children:[e," "]})," \u6ce8\u518c\u6210\u529f\uff01"]}),Object(p.jsx)("button",{className:"btn btn-success btn-block",type:"button",onClick:function(){return n(void 0)},children:"\u76f4\u63a5\u767b\u5f55"})]})})}}]),n}(g),w=function(t){Object(s.a)(n,t);var e=Object(o.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"content",value:function(){var t=this.controller.login;return Object(p.jsx)("div",{className:"container w-max-30c",children:Object(p.jsxs)("div",{className:"my-5",children:[Object(p.jsx)("div",{className:"py-5 text-center text-success",children:"\u6210\u529f\u4fee\u6539\u5bc6\u7801"}),Object(p.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){return t()},children:"\u767b\u5f55\u8d26\u53f7"})]})})}}]),n}(g),S=function(t){Object(s.a)(n,t);var e=Object(o.a)(n);function n(){var t;Object(i.a)(this,n);for(var r=arguments.length,u=new Array(r),s=0;s<r;s++)u[s]=arguments[s];return(t=e.call.apply(e,[this].concat(u))).account=void 0,t.type=void 0,t.password=void 0,t.verify=void 0,t.login=function(){var e=Object(c.a)(a.a.mark((function e(n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.n.login({user:n||t.account,pwd:t.password,guest:l.nav.guest});case 2:if(void 0!==(r=e.sent)){e.next=6;break}return alert("something wrong!"),e.abrupt("return");case 6:return e.next=8,l.nav.userLogined(r);case 8:t.isWebNav&&l.nav.navigate("/");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t}return Object(u.a)(n,[{key:"internalStart",value:function(){var t=Object(c.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.openVPage(this.VStart);case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"VVerify",get:function(){return d}},{key:"toVerify",value:function(){var t=this;this.openVPage(this.VVerify,function(){var e=Object(c.a)(a.a.mark((function e(n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.verify=n,e.next=3,y.n.checkVerify(t.account,n);case 3:if(0!==(r=e.sent)){e.next=6;break}return e.abrupt("return",r);case 6:t.toPassword();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"toPassword",value:function(){this.openVPage(this.VPassword)}},{key:"toSuccess",value:function(){this.openVPage(this.VSuccess)}},{key:"checkAccount",value:function(){var t=Object(c.a)(a.a.mark((function t(){var e,n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.n.isExists(this.account);case 2:if(e=t.sent,void 0===(n=this.accountError(e))){t.next=6;break}return t.abrupt("return",n);case 6:return t.next=8,y.n.sendVerify(this.account,this.type,l.nav.oem);case 8:return e=t.sent,this.toVerify(),t.abrupt("return");case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),n}(b.a),V=function(t){Object(s.a)(n,t);var e=Object(o.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"VStart",get:function(){return m}},{key:"VPassword",get:function(){return x}},{key:"VSuccess",get:function(){return k}},{key:"accountError",value:function(t){if(t>0)return"\u5df2\u7ecf\u88ab\u6ce8\u518c\u4f7f\u7528\u4e86"}},{key:"onPasswordSubmit",value:function(){var t=Object(c.a)(a.a.mark((function t(e){var n,r,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.password=e,n={nick:void 0,user:this.account,pwd:e,country:void 0,mobile:void 0,mobileCountry:void 0,email:void 0,verify:this.verify},t.t0=this.type,t.next="mobile"===t.t0?5:"email"===t.t0?8:10;break;case 5:return n.mobile=Number(this.account),n.mobileCountry=86,t.abrupt("break",10);case 8:return n.email=this.account,t.abrupt("break",10);case 10:return t.next=12,y.n.register(n);case 12:if(0!==(r=t.sent)){t.next=17;break}return l.nav.clear(),this.toSuccess(),t.abrupt("return");case 17:return c=this.regReturn(r),t.abrupt("return",c);case 19:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"regReturn",value:function(t){var e;switch(t){default:return"\u670d\u52a1\u5668\u53d1\u751f\u9519\u8bef";case 4:return"\u9a8c\u8bc1\u7801\u9519\u8bef";case 0:return;case 1:e="\u7528\u6237\u540d "+this.account;break;case 2:e="\u624b\u673a\u53f7 +"+this.account;break;case 3:e="\u90ae\u7bb1 "+this.account}return e+" \u5df2\u7ecf\u88ab\u6ce8\u518c\u8fc7\u4e86"}}]),n}(S),N=function(t){Object(s.a)(n,t);var e=Object(o.a)(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"VStart",get:function(){return v}},{key:"VPassword",get:function(){return O}},{key:"VSuccess",get:function(){return w}},{key:"accountError",value:function(t){if(0===t)return"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u8d26\u53f7"}},{key:"onPasswordSubmit",value:function(){var t=Object(c.a)(a.a.mark((function t(e){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.password=e,t.next=3,y.n.resetPassword(this.account,this.password,this.verify,this.type);case 3:if(0!==t.sent.length){t.next=8;break}throw n="something wrong in reseting password",console.log(n),n;case 8:return l.nav.clear(),this.toSuccess(),t.abrupt("return");case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),n}(S)}}]);
//# sourceMappingURL=0.6f33de5a.chunk.js.map